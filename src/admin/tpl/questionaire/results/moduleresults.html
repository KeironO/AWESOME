{% extends "questionaire/questionaire.html" %}

{% set title = "Modules" %}

{% block javascripts %}
	{{ parent() }}
	
	<script src="{{url}}/js/Chart.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		function doGraph(key, data) {
			var graphdata = {
				"labels": [1,2,3,4,5],
				"datasets":[
					{
						"value":0,
						"color":"#F7464A",
						"data":data
					}
				]
			}
			
			var ctx = document.getElementById(key+"_bar").getContext("2d");
			var myNewChart = new Chart(ctx).Bar(graphdata);
		}
	</script>
{% endblock %}

{% block qcontent %}
	{% for alert in alerts %}
		<div class="alert alert-{{alert.type}}" role="alert">{{alert.message}}</div>
	{% endfor %}
	
	<h1>Results for {{module.ModuleID}}: {{module.ModuleTitle}}</h1>
	

	{% for question in questions %}
		<h3>{{question.QuestionText}}</h3>
		
		{% if question.QuestionType == "text" %}
			{% for result in question.Results %}
				{{result.Value}}<br/>
			{% endfor %}
		{% elseif question.QuestionType == "rate" %}
		<canvas id="{{question.Key}}_bar" width="400" height="400"></canvas>
		<canvas id="{{question.Key}}_pie" width="400" height="400"></canvas>
		<script>
			doGraph("{{question.Key}}",{{question.Summary|json_encode()}});
		</script>
		{% endif %}
		
	{% endfor %}

{% endblock %}
