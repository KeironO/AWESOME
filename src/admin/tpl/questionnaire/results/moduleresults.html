{% extends "questionnaire/questionnaire.html" %}

{% set title = "Modules" %}

{% block javascripts %}
	{{ parent() }}
	
	<script src="{{url}}/js/Chart.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		function doChart(key, data) {
			doBarChart(key+"_bar", data);
		}
		
		function doBarChart(key, data) {
			var graphdata = {
				"labels": [
					"Strongly Disagree", //1
					"Disagree",          //2
					"Neutral",           //3
					"Agree",             //4
					"Strongly Agree"     //5
				],
				"datasets":[
					{
						"value":0,
						"color":"#F7464A",
						"data":data
					}
				]
			}
			
			var ctx = document.getElementById(key).getContext("2d");
			var myNewChart = new Chart(ctx).Bar(graphdata, {animationSteps : 1});
		}		
	</script>
{% endblock %}

{% block qcontent %}
	{% for alert in alerts %}
		<div class="alert alert-{{alert.type}}" role="alert">{{alert.message}}</div>
	{% endfor %}
	
	<h3>Results for {{module.ModuleID}}: {{module.ModuleTitle}}</h3>
	

	{% for question in questions %}
		<h4>{{question.QuestionText}}</h4>
		
		{% if question.QuestionType == "text" %}
			{% for result in question.Results %}
				{{result.Value}}<br/>
			{% endfor %}
		{% elseif question.QuestionType == "rate" %}
		<center>
		<canvas id="{{question.Key}}_bar" width="300" height="300"></canvas>
		<h5>Mean:</h5>
		</center>
		<script>
			doChart("{{question.Key}}",{{question.Summary|json_encode()}});
		</script>
		{% endif %}
		
	{% endfor %}

{% endblock %}
